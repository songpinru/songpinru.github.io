# 关机

（1）sync		（功能描述：将数据由内存同步到硬盘中）

（2）halt 		（功能描述：关闭系统，等同于shutdown -h now 和 poweroff）

（3）reboot	    （功能描述：就是重启，等同于 shutdown -r now）

# vi/vim

## 一般模式

| 语法                        | 功能描述                              |
| --------------------------- | ------------------------------------- |
| yy                          | 复制光标当前一行                      |
| y数字y                      | 复制一段（从第几行到第几行）          |
| p                           | 箭头移动到目的行粘贴                  |
| u                           | 撤销上一步                            |
| dd                          | 删除光标当前行                        |
| d数字d                      | 删除光标（含）后多少行                |
| x                           | 删除一个字母，相当于del，向后删       |
| X                           | 删除一个字母，相当于Backspace，向前删 |
| yw                          | 复制一个词                            |
| dw                          | 删除一个词                            |
| ^                           | 移动到行头                            |
| $                           | 移动到行尾                            |
| gg或者1+G                   | 移动到页头                            |
| G                           | 移动到页尾                            |
| 数字+G（先输入数字，在按G） | 移动到目标行                          |
## 编辑模式

| 按键 | 功能               |
| ---- | ------------------ |
| i    | 当前光标前         |
| a    | 当前光标后         |
| o    | 当前光标行的下一行 |
| I    | 光标所在行最前     |
| A    | 光标所在行最后     |
| O    | 当前光标行的上一行 |
## 指令模式

| 命令           | 功能                       |
| -------------- | -------------------------- |
| :w             | 保存                       |
| :q             | 退出                       |
| :!             | 强制执行                   |
| / 要查找的词   | n 查找下一个，N 往上查找   |
| ? 要查找的词   | n是查找上一个，N是往下查找 |
| :set nu        | 显示行号                   |
| :set nonu      | 关闭行号                   |
| :nohl          | 去除高亮显示               |
| ZZ（shift+zz） | 退出                       |

# 网络及服务

## ip

```bash
# network interfaces configuring网络接口配置
ifconfig

# 修改ip地址
vim /etc/sysconfig/network-scripts/ifcfg-eth0

#系统启动的时候网络接口是否有效（yes/no）
ONBOOT=yes                
# IP的配置方法[none|static|bootp|dhcp]（引导时不使用协议|静态分配IP|BOOTP协议|DHCP协议）
BOOTPROTO=static      
#IP地址
IPADDR=192.168.1.100   
#网关  
GATEWAY=192.168.1.2      
#域名解析器
DNS1=114.114.114.114
DNS2=8.8.8.8
```
## hostname
```bash
# 查看主机名
hostname

# 修改主机名
vim /etc/sysconfig/network
```

## service

防火墙为：`iptables`or`firewalld`

```bash
service  服务名 start
service  服务名 stop
service  服务名 restart
service  服务名 status
# 查看所有后台服务
service --status-all
```

## 开机自启

```bash
# 查看所有服务器自启配置
chkconfig

chkconfig 服务名 off
chkconfig 服务名 on 
chkconfig 服务名 --list
```

# 常用命令

| 命令    |                                 |
| ------- | ------------------------------- |
| man     | 获得帮助信息                    |
| help    |                                 |
| pwd     |                                 |
| ls      |                                 |
| cd      | -P 实际路径                     |
| mkdir   | -p 多层目录                     |
| rmdir   |                                 |
| touch   | 创建空文件                      |
| cp      | -r 递归                         |
| rm      | -r 递归 -v 显示过程 -f 强制删除 |
| mv      |                                 |
| cat     | -n 显示行号                     |
| more    |                                 |
| less    |                                 |
| echo    | -e  支持转义                    |
| head    | -n<行数>                        |
| tail    | -f 显示追加 -n<行数>            |
| ln -s   | 软连接                          |
| history |                                 |

> \> 覆盖
>
> \>> 追加

# 时间类
| Command                       |                  |
| ----------------------------- | ---------------- |
| date                          | 显示当前时间     |
| date +%Y                      | 显示当前年份     |
| date +%m                      | 显示当前月份     |
| date +%d                      | 显示当前是哪一天 |
| date "+%Y-%m-%d %H:%M:%S"     | 显示年月日时分秒 |
| date -d '1 days ago'          | 显示前一天时间   |
| date -d '-1 days ago'         | 显示明天时间     |
| date -s "2017-06-19 20:52:18" | 设置时间         |
| cal 2020                      | 显示一年的日历   |

do_date=`date -d "-1 day" +%F`

# 用户和用户组

|                           |                                              |
| ------------------------- | -------------------------------------------- |
| useradd 用户名            | 添加新用户                                   |
| useradd -g 组名 用户名    | 添加新用户到某个组                           |
| userdel  用户名           | 删除用户但保存用户主目录                     |
| userdel -r 用户名         | 用户和用户主目录，都删除                     |
| usermod -g 用户组 用户名  | 修改用户的初始登录组，给定的组必须存在       |
| passwd 用户名             | 设置用户密码                                 |
| id 用户名                 | 查看用户是否存在                             |
| whoami                    | 显示自身用户名称                             |
| who am i                  | 显示登录用户的用户名                         |
| su 用户名称               | 切换用户，只能获得执行权限，不能获得环境变量 |
| su - 用户名称             | 切换到用户并获得环境变量及执行权限           |
| groupadd 用户组           | 新增组                                       |
| groupdel 用户组           | 删除组                                       |
| groupmod -n 新组名 老组名 | 修改组                                       |

查看创建了哪些用户`cat  /etc/passwd`
设置普通用户具有root权限`vim /etc/sudoers`
查看创建了哪些组`cat  /etc/group`

# 权限

![](src\权限.png)

| 命令                               |                          |
| ---------------------------------- | ------------------------ |
| chmod                              | 改变权限                 |
| chown [-R] [最终用户] [文件或目录] | 改变文件或者目录的所有者 |
| chgrp [最终用户组] [文件或目录]    | 改变文件或者目录的所属组 |

# 查找

find [搜索范围] [选项]

| 选项            | 功能                             |
| --------------- | -------------------------------- |
| -name<查询方式> | 按照指定的文件名查找模式查找文件 |
| -user<用户名>   | 查找属于指定用户名所有文件       |
| -size<文件大小> | 按照指定的文件大小查找文件。     |

 查找命令在那个目录下`which 命令`

# 压缩/解压缩
| 命令 | |
|---|---|
|gzip 文件             | 压缩文件，只能将文件压缩为.gz文件|
|gunzip 文件.gz      | 解压缩文件命令|
|zip  [-r] XXX.zip  将要压缩的内容               | 压缩文件和目录的命令|
|unzip [-d<目录>] XXX.zip                                      | 解压缩文件，-d指定目录|
|tar  [选项]  XXX.tar.gz 将要打包进去的内容             | 打包目录，压缩后的文件格式.tar.gz|

| 选项   | 功能               |
| ------ | ------------------ |
| -z     | 打包同时压缩       |
| **-c** | 产生.tar打包文件   |
| -v     | 显示详细信息       |
| -f     | 指定压缩后的文件名 |
| **-x** | 解包.tar文件       |
| -C     | 指定目录           |

`tar-zxvf xiyou.tar.gz -C /opt`

# 高级命令
| 命令                            |                        |
| ------------------------------- | ---------------------- |
| `df  -h`                        | 查看磁盘空间使用情况   |
| `fdisk -l  `                    | 查看磁盘分区详情       |
| `ps -aux | grep xxx`            | 查看系统中所有进程     |
| `ps -ef | grep xxx`             | 查看子父进程之间的关系 |
| `netstat -anp |grep 进程号`     | 查看该进程网络信息     |
| `netstat -nlp	| grep 端口号` | 查看网络端口号占用情况 |

# 定时(crontab)

`service crond restart`

| 选项 | 功能                          |
| ---- | ----------------------------- |
| -e   | 编辑crontab定时任务           |
| -l   | 查询crontab任务               |
| -r   | 删除当前用户所有的crontab任务 |

`crontab -e`

| 项目       | 含义                 | 范围                    |
| ---------- | -------------------- | ----------------------- |
| 第一个“\*” | 一小时当中的第几分钟 | 0-59                    |
| 第二个“\*” | 一天当中的第几小时   | 0-23                    |
| 第三个“\*” | 一个月当中的第几天   | 1-31                    |
| 第四个“\*” | 一年当中的第几月     | 1-12                    |
| 第五个“\*” | 一周当中的星期几     | 0-7（0和7都代表星期日） |

| 特殊符号 | 含义                                                         |
| -------- | ------------------------------------------------------------ |
| \*       | 代表任何时间。比如第一个“\*”就代表一小时中每分钟都执行一次的意思。 |
| ，       | 代表不连续的时间。比如“0 8,12,16 \* \* \* 命令\”，就代表在每天的8点0分，12点0分，16点0分都执行一次命令 |
| -        | 代表连续的时间范围。比如“0 5  \*    \*  1-6命令”，代表在周一到周六的凌晨5点0分执行命令 |
| \*/n     | 代表每隔多久执行一次。比如“\*/10  \*    \*  \*  \*  命令”，代表每隔10分钟就执行一遍命令 |

# 软件包

## RPM

| 命令                   |                          |
| ---------------------- | ------------------------ |
| rpm -qa                | 查询安装的所有rpm软件包  |
| rpm -e --nodeps 软件包 | 卸载软件时，不检查依赖。 |
| rpm -ivh 包全名        | 安装                     |

>  卸载软件时，不检查依赖,那些使用该软件包的软件在此之后可能就不能正常工作了

## YUM

yum [-y]  [参数]

| 参数         | 功能                          |
| ------------ | ----------------------------- |
| install      | 安装rpm软件包                 |
| update       | 更新rpm软件包                 |
| check-update | 检查是否有可用的更新rpm软件包 |
| remove       | 删除指定的rpm软件包           |
| list         | 显示软件包信息                |
| clean        | 清理yum过期的缓存             |
| deplist      | 显示yum软件包的所有依赖关系   |

